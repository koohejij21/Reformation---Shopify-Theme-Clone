<product-card
  class="product-card"
  data-handle="{{ product.handle }}">
  {%- assign form_id = 'Form-' | append: section.id | append: product.id -%}
  {%- assign current_variant = product.selected_or_first_available_variant -%}
  {%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}
  <div>

    <a
      href="{{current_variant.url}}">
      <img
        src="{{featured_image | img_url: 'large'}}"
        alt="">
      <h3>{{ product.title }}</h3>
    </a>
    <div>
      <b>{{ current_variant.price | money }}</b>
      <s>{{ product.compare_at_price_max | money }}</s>
    </div>
    <div>
      {% form 'product', product %}
        <input
          type="hidden"
          name="quantity"
          value="1">
        <select
          name="id"
          class="hidden">
          {% for variant in product.variants %}
            <option
              value="{{ variant.id }}"
              {% if variant.id == current_variant.id %}
              selected
              {% endif %}>
              {{ variant.title }}
            </option>
          {% endfor %}
        </select>
        {% for option in product.options_with_values %}
          {% assign option_name = option.name | handleize %}
          {% if option_name != "color" %}
            <div
              class="mb-10 ">
              <input
                type="hidden">
              <label>{{ option.name }}</label>
              {% for value in option.values %}
                <input
                  name="{{option.name}}"
                  type="radio">
                <label>{{ value }}</label>
              {% endfor %}
            </div>
          {% else %}
            <div
              class="color-options mb-10 flex align-center">
              {{ option.name }}
              {% for value in option.values %}
                <input
                  name="{{option.name}}"
                  type="radio">
                <label
                  style="background-color:{{value | handleize}}; border:2px solid black; background-image:url({{value | handleize | append: '.png' |file_img_url }}}); padding:5px"
                  class="color-options--colors">{{ value }}</label>
              {% endfor %}
            </div>
          {% endif %}
        {% endfor %}
        {% if current_variant.available %}
          <button
            class="button button--primary"
            type="submit">Add to Cart</button>
        {% else %}
          <button
            class="button button--primary"
            type="button"
            disabled>Sold Out</button>
        {% endif %}
      {% endform %}
    </div>

  </div>
</product-card>


<style>
  .color-options--colors {
    margin: 0 10px;
  }
</style>